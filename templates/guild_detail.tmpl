{{template "_header.tmpl" .}}
        <div class="content-card">
                <div class="content-header">
                        <i class="fas fa-shield-alt"></i>
                        <div class="content-header-text">
                                <span>Guild Details</span>
                        </div>
                </div>
                <div class="content-body">
                        {{if .Guild}}
                                <h2 style="text-align: center; margin-bottom: 30px; font-size: 2.5em; color: #c9a86a;">{{.Guild.Name}}</h2>
                                
                                {{if .IsLeader}}
                                <div style="margin-bottom: 30px; padding: 20px; background: #2a2420; border: 1px solid #6b5d4f; border-radius: 4px;">
                                        <h3 style="margin-top: 0px; margin-bottom: 15px; color: #c9a86a;">Update Guild Description</h3>
                                        <form method="POST" action="/guild/update-description">
                                                <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                <textarea name="description" placeholder="Guild description..." style="width: 100%; min-height: 80px; padding: 8px; background: #2a2420; color: #e6c98a; border: 1px solid #6b5d4f; border-radius: 4px; font-family: Arial, sans-serif;">{{.Guild.Description}}</textarea>
                                                <button type="submit" style="margin-top: 10px; background: linear-gradient(180deg, #90EE90 0%, #7ACB5C 45%, #5FA844 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Update Description</button>
                                        </form>
                                </div>
                                {{else if .Guild.Description}}
                                <p style="text-align: left; margin-bottom: 30px; font-style: italic; color: #a89780;">{{.Guild.Description}}</p>
                                {{end}}
                                
                                <p style="text-align: left; margin-bottom: 5px;">The guild was founded on {{.Guild.Created | FormatTimestamp}}.</p>
                                {{if .Guild.IsInactive}}
                                <p style="text-align: left; margin-bottom: 5px; color: #A11;">It is currently inactive and will be disbanded on {{.Guild.DisbandDate | FormatTimestamp}}.</p>
                                {{else}}
                                {{if .Guild.GuildHouseID}}
                                <p style="text-align: left; margin-bottom: 5px;">It is currently active.</p>
                                <p style="text-align: left; margin-bottom: 30px;">Their home is <a href="/house?id={{.Guild.GuildHouseID}}" style="color: #c9a86a; text-decoration: none;">linked to this guild house</a>.</p>
                                {{else}}
                                <p style="text-align: left; margin-bottom: 30px;">It is currently active.</p>
                                {{end}}
                                {{end}}
                                
                                {{if .Members}}
                                <h3 style="margin-top: 0px; margin-bottom: 15px; color: #c9a86a;">Guild Members</h3>
                                <table style="width: 100%;">
                                        <tr style="border-bottom: 2px solid #3d2817;">
                                                <th style="padding: 10px; text-align: left;">Rank</th>
                                                <th style="padding: 10px; text-align: left;">Name (Title)</th>
                                                <th style="padding: 10px; text-align: left;">Vocation</th>
                                                <th style="padding: 10px; text-align: left;">Level</th>
                                                <th style="padding: 10px; text-align: left;">Joining Date</th>
                                                <th style="padding: 10px; text-align: left;">Status</th>
                                        </tr>
                                        {{range .Members}}
                                                <tr style="border-bottom: 1px solid #3d2817;">
                                                        <td style="padding: 10px;">{{.Rank}}</td>
                                                        <td style="padding: 10px;">{{.CharacterName}}{{if .Title}} ({{.Title}}){{end}}</td>
                                                        <td style="padding: 10px;">{{.Profession}}</td>
                                                        <td style="padding: 10px;">{{.Level}}</td>
                                                        <td style="padding: 10px;">{{.Joined | FormatTimestamp}}</td>
                                                        <td style="padding: 10px;">{{.Status}}</td>
                                                </tr>
                                        {{end}}
                                </table>
                                {{end}}
                                
                                {{if .Invites}}
                                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #c9a86a;">Pending Invitations</h3>
                                <table style="width: 100%;">
                                        <tr style="border-bottom: 2px solid #3d2817;">
                                                <th style="padding: 10px; text-align: left;">Character Name</th>
                                                <th style="padding: 10px; text-align: left;">Date Invited</th>
                                                {{if .IsLeader}}<th style="padding: 10px; text-align: left;">Actions</th>{{end}}
                                        </tr>
                                        {{range .Invites}}
                                                <tr style="border-bottom: 1px solid #3d2817;">
                                                        <td style="padding: 10px;"><a href="/character?name={{.CharacterName}}" style="color: #c9a86a; text-decoration: none;">{{.CharacterName}}</a></td>
                                                        <td style="padding: 10px;">{{.Timestamp | FormatTimestamp}}</td>
                                                        {{if .IsLeader}}<td style="padding: 10px;">
                                                                <form method="POST" action="/guild/revoke" style="display: inline;">
                                                                        <input type="hidden" name="guildid" value="{{.GuildID}}">
                                                                        <input type="hidden" name="charactername" value="{{.CharacterName}}">
                                                                        <button type="submit" style="background: #FF6B6B; color: #fff; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 0.9em;">Revoke</button>
                                                                </form>
                                                        </td>{{end}}
                                                </tr>
                                        {{end}}
                                </table>
                                {{end}}
                                
                                {{if .HasInvite}}
                                <div style="margin-top: 40px; border-top: 2px solid #3d2817; padding-top: 30px; text-align: center;">
                                        <h3 style="margin-top: 0px; margin-bottom: 20px; color: #c9a86a;">You Have Been Invited!</h3>
                                        <p style="margin-bottom: 20px; color: #e6c98a;">You have a pending invitation to join this guild.</p>
                                        <form method="POST" action="/guild/accept-invite" style="display: inline;">
                                                <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                <button type="submit" style="background: linear-gradient(180deg, #90EE90 0%, #7ACB5C 45%, #5FA844 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Join Guild</button>
                                        </form>
                                </div>
                                {{end}}
                                
                                {{if .IsViceLeader}}
                                <div style="margin-top: 40px; border-top: 2px solid #3d2817; padding-top: 30px;">
                                        <h3 style="margin-top: 0px; margin-bottom: 20px; color: #c9a86a;">Vice-Leader Actions</h3>
                                        
                                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                                <form method="POST" action="/guild/invite" style="display: inline;">
                                                        <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                        <input type="text" name="charactername" placeholder="Character name..." required style="padding: 8px; background: #2a2420; color: #e6c98a; border: 1px solid #6b5d4f; font-family: 'Cinzel', serif;">
                                                        <button type="submit" style="background: linear-gradient(180deg, #90EE90 0%, #7ACB5C 45%, #5FA844 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Invite Player</button>
                                                </form>
                                        </div>
                                </div>
                                {{else if .IsLeader}}
                                <div style="margin-top: 40px; border-top: 2px solid #3d2817; padding-top: 30px;">
                                        <h3 style="margin-top: 0px; margin-bottom: 20px; color: #c9a86a;">Guild Management</h3>
                                        
                                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                                <form method="POST" action="/guild/invite" style="display: inline;">
                                                        <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                        <input type="text" name="charactername" placeholder="Character name..." required style="padding: 8px; background: #2a2420; color: #e6c98a; border: 1px solid #6b5d4f; font-family: 'Cinzel', serif;">
                                                        <button type="submit" style="background: linear-gradient(180deg, #90EE90 0%, #7ACB5C 45%, #5FA844 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Invite Player</button>
                                                </form>
                                                
                                                <form method="POST" action="/guild/revoke" style="display: inline;">
                                                        <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                        <input type="text" name="charactername" placeholder="Character name..." required style="padding: 8px; background: #2a2420; color: #e6c98a; border: 1px solid #6b5d4f; font-family: 'Cinzel', serif;">
                                                        <button type="submit" style="background: linear-gradient(180deg, #FFD700 0%, #FFA500 45%, #FF8C00 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Revoke Invitation</button>
                                                </form>
                                                
                                                <form method="POST" action="/guild/expel" style="display: inline;">
                                                        <input type="hidden" name="guildid" value="{{.Guild.GuildID}}">
                                                        <input type="text" name="charactername" placeholder="Character name..." required style="padding: 8px; background: #2a2420; color: #e6c98a; border: 1px solid #6b5d4f; font-family: 'Cinzel', serif;">
                                                        <button type="submit" style="background: linear-gradient(180deg, #FF6B6B 0%, #EE5A5A 45%, #CC4444 100%); color: #fff; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif;">Expel Member</button>
                                                </form>
                                        </div>
                                </div>
                                {{end}}
                                
                                <div style="margin-top: 30px;">
                                        <a href="/guilds" style="background: linear-gradient(180deg, #e6c98a 0%, #c9a86a 45%, #a8834f 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif; text-decoration: none; display: inline-block;">Back</a>
                                </div>
                        {{else}}
                                <p>Guild not found.</p>
                                <div style="margin-top: 30px;">
                                        <a href="/guilds" style="background: linear-gradient(180deg, #e6c98a 0%, #c9a86a 45%, #a8834f 100%); color: #1a1410; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-family: 'Cinzel', serif; text-decoration: none; display: inline-block;">Back</a>
                                </div>
                        {{end}}
                </div>
        </div>
{{template "_footer.tmpl" .}}
